{

    // Use IntelliSense to learn about possible attributes.

    // Hover to view descriptions of existing attributes.

    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387

    "version": "0.2.0",

    "configurations": [

        {

            "name": "GPT-2 - Session-based",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/codes/recsys_main.py",
            "env": {"CUDA_VISIBLE_DEVICES":"0,1", "TOKENIZERS_PARALLELISM":"false", "WANDB_MODE": "dryrun"},
            "console": "integratedTerminal",
            "args": [
                "--output_dir", "./tmp/",
                "--do_train",
                "--do_eval",
                "--data_path", "~/dataset/ecommerce_dataset/ecommerce_preproc_v5/with_repetitions/",
                "--start_date", "2019-10-01",
                "--end_date", "2019-10-03",
                "--data_loader_engine", "nvtabular",
                "--petastorm_reader_pool_type", "process",
                "--workers_count", "0",
                "--per_device_train_batch_size", "512",
                "--per_device_eval_batch_size", "512",
                "--model_type", "gpt2", 
                "--loss_type", "cross_entropy", 
                "--margin_loss", "0.0",
                "--logging_steps", "1",
                "--d_model", "320",
                "--n_layer", "1",
                "--n_head", "2",
                "--dropout", "0.1",
                "--learning_rate", "0.0002",
                "--learning_rate_schedule", "linear_with_warmup",
                "--similarity_type", "concat_mlp",
                "--num_train_epochs", "1",
                "--all_rescale_factor", "1",
                "--neg_rescale_factor", "0",
                "--feature_config", "${workspaceFolder}/datasets/ecommerce-large/config/features/session_based_features_all.yaml",
                "--inp_merge", "mlp",
                "--tf_out_activation", "tanh",
                "--experiments_group", "local_test",
                "--weight_decay", "6e-5",
                "--learning_rate_warmup_steps", "10",
                "--learning_rate_num_cosine_cycles", "1.25",
                "--dataloader_drop_last",
                "--compute_metrics_each_n_steps", "1",
                "--hidden_act", "gelu_new",
                "--save_steps", "0",
                "--eval_on_last_item_seq_only",
                "--fp16",
                "--overwrite_output_dir",
                "--session_seq_length_max", "20",                
            ],
            "python": "/home/gmoreira/miniconda3/envs/transf4rec_hf4/bin/python",
            "justMyCode": false
        },

        {

            "name": "GPT-2 - Session-aware",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/codes/recsys_main.py",
            "env": {"CUDA_VISIBLE_DEVICES":"0,1", "TOKENIZERS_PARALLELISM":"false", "WANDB_MODE": "dryrun"},
            "console": "integratedTerminal",
            "args": [
                "--output_dir", "./tmp/",
                "--do_train",
                "--do_eval",
                "--data_path", "~/dataset/ecommerce_dataset/ecommerce_preproc_v5/with_repetitions/",
                "--start_date", "2019-10-01",
                "--end_date", "2019-10-03",
                "--data_loader_engine", "nvtabular",
                "--petastorm_reader_pool_type", "process",
                "--workers_count", "0",
                "--per_device_train_batch_size", "512",
                "--per_device_eval_batch_size", "512",
                "--model_type", "gpt2", 
                "--loss_type", "cross_entropy", 
                "--margin_loss", "0.0",
                "--logging_steps", "1",
                "--d_model", "320",
                "--n_layer", "1",
                "--n_head", "2",
                "--dropout", "0.1",
                "--learning_rate", "0.0002",
                "--learning_rate_schedule", "linear_with_warmup",
                "--similarity_type", "concat_mlp",
                "--num_train_epochs", "1",
                "--all_rescale_factor", "1",
                "--neg_rescale_factor", "0",
                "--feature_config", "${workspaceFolder}/datasets/ecommerce-large/config/features/session_aware_features_all.yaml",
                "--inp_merge", "mlp",
                "--tf_out_activation", "tanh",
                "--experiments_group", "local_test",
                "--weight_decay", "6e-5",
                "--learning_rate_warmup_steps", "10",
                "--learning_rate_num_cosine_cycles", "1.25",
                "--dataloader_drop_last",
                "--compute_metrics_each_n_steps", "1",
                "--hidden_act", "gelu_new",
                "--save_steps", "0",
                "--eval_on_last_item_seq_only",
                "--fp16",
                "--overwrite_output_dir",
                "--session_seq_length_max", "20",                
                "--session_aware",
                "--session_aware_past_seq_length_max", "20",
            ],
            "python": "/home/gmoreira/miniconda3/envs/transf4rec_hf4/bin/python",
            "justMyCode": false
        },

        {
            "name": "XLNet - Session-based",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/codes/recsys_main.py",
            "env": {"CUDA_VISIBLE_DEVICES":"0,1", "TOKENIZERS_PARALLELISM":"false", "WANDB_MODE": "dryrun"},
            "console": "integratedTerminal",
            "args": [

                "--output_dir", "./tmp/",
                "--do_train",
                "--do_eval",
                "--data_path", "~/dataset/ecommerce_dataset/ecommerce_preproc_v5/with_repetitions/",
                "--start_date", "2019-10-01",
                "--end_date", "2019-10-03",
                "--data_loader_engine", "nvtabular",
                "--petastorm_reader_pool_type", "process",
                "--workers_count", "0",
                "--per_device_train_batch_size", "512",
                "--per_device_eval_batch_size", "512",
                "--model_type", "xlnet",
                "--loss_type", "cross_entropy",
                "--margin_loss", "0.0",
                "--logging_steps", "1",
                "--d_model", "320",
                "--n_layer", "3",
                "--n_head", "4",
                "--dropout", "0.0",
                "--learning_rate", "0.0005",
                "--similarity_type", "concat_mlp",
                "--num_train_epochs", "10",
                "--all_rescale_factor", "1",
                "--neg_rescale_factor", "0",
                "--feature_config", "${workspaceFolder}/datasets/ecommerce-large/config/features/session_based_features_pid.yaml",
                "--inp_merge", "mlp",
                "--tf_out_activation", "tanh",
                "--experiments_group", "local_test",
                "--weight_decay", "9e-6",                
                "--learning_rate_schedule", "linear_with_warmup",
                "--learning_rate_warmup_steps", "10",
                "--learning_rate_num_cosine_cycles", "1.25",
                "--dataloader_drop_last",
                "--compute_metrics_each_n_steps", "1",
                "--hidden_act", "gelu",
                "--save_steps", "0",
                "--eval_on_last_item_seq_only",
                "--fp16",
                "--overwrite_output_dir",
                "--session_seq_length_max", "20",
                "--mlm",
                "--mlm_probability", "0.5"

            ],
            "python": "/home/gmoreira/miniconda3/envs/transf4rec_hf4/bin/python",
            "justMyCode": false
        },

    ]

}
